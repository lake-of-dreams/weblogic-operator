# The container definition we want to use for developing our app
box: golang
build:
  steps:
    - setup-go-workspace:
        package-dir: github.com/sczachariah/weblogic-operator

    - script:
          name: install go tools
          code: |
            go version
            go get -u -v github.com/golang/dep
            go get -u -v github.com/golang/dep/cmd/dep

      - script:
          name: install dependencies
          code: |
            dep ensure

    # Statically build the project
      - script:
          name: build the project
          code:
            make build

    # Copy binary to a location that gets passed along to the deploy pipeline
      - script:
          name: copy to deployment directory
          code: |
            echo $WERCKER_OUTPUT_DIR
            cp -av dist/bin/weblogic-operator "$WERCKER_OUTPUT_DIR"